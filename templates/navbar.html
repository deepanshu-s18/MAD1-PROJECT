<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">

<nav class="navbar navbar-expand-lg navbar-dark bg-dark">
    <div class="container-fluid">
        <a class="navbar-brand me-auto" href="{{ url_for('index') }}"> {# Changed href to url_for, added me-auto to push brand to left #}
            ParkEase &nbsp;<i class="bi bi-car-front-fill"></i> {# Consolidated brand text and icon #}
        </a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#mainNavbarContent" aria-controls="mainNavbarContent" aria-expanded="false" aria-label="Toggle navigation"> {# Changed ID for clarity #}
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="mainNavbarContent"> {# Changed ID for clarity #}
            <ul class="navbar-nav ms-auto mb-2 mb-lg-0"> {# ms-auto pushes nav items to the right #}
                {% if session.get('email') %}
                    {# Display User's Email/Name if logged in #}
                    <li class="nav-item me-lg-3"> {# Added some margin to the right for this item #}
                        <span class="nav-link text-white-50">Welcome, {{ session.get('email') }}</span> {# Displaying user email #}
                    </li>

                    {% if 'admin' in session.get('roles', []) %} {# Robust check: using .get with default empty list #}
                        <li class="nav-item">
                            <a class="nav-link" href="{{ url_for('index') }}">Home</a> {# Removed bold, active #}
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="{{ url_for('admin_user_list') }}">Users</a> {# Changed admin_user to admin_user_list for clarity #}
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="{{ url_for('admin_search_page') }}">Search</a> {# Changed admin_search to admin_search_page #}
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="{{ url_for('admin_summary_report') }}">Summary</a> {# Changed admin_summary to admin_summary_report #}
                        </li>
                    {% endif %}

                    {% if 'user' in session.get('roles', []) %} {# Robust check #}
                        <li class="nav-item">
                            <a class="nav-link" href="{{ url_for('index') }}">Home</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="{{ url_for('user_parking_search') }}">Search Parking</a> {# Changed user_search_parking to user_parking_search #}
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="{{ url_for('user_booking_summary') }}">My Bookings</a> {# Changed user_summary to user_booking_summary #}
                        </li>
                    {% endif %}

                    <li class="nav-item">
                        <a class="nav-link" href="{{ url_for('logout') }}">Logout</a> {# Used url_for #}
                    </li>
                {% else %} {# Not logged in #}
                    <li class="nav-item">
                        <a class="nav-link" href="{{ url_for('login') }}">Login</a> {# Used url_for, removed bold #}
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="{{ url_for('register') }}">Register</a> {# Used url_for, removed bold #}
                    </li>
                {% endif %}
            </ul>
        </div>
    </div>
</nav>